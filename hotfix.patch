patch 4f5cbecca8e517d5bd51195a3c282b0e25feea7a
Author: Adam Matou≈°ek <adamat@mail.muni.cz>
Date:   Wed Sep  4 13:05:01 CEST 2019
  * test: Fix path to the built toolchain.
diff -rN -u old-divine-next/Makefile new-divine-next/Makefile
--- old-divine-next/Makefile	2019-09-17 09:44:33.305647097 +0200
+++ new-divine-next/Makefile	2019-09-17 09:44:33.305647097 +0200
@@ -83,7 +83,7 @@
 	sh releng/install-divbench.sh $(OBJ)bench/tools/divbench $(BENCH_DIR) $(BENCH_NAME) \
 	  $(SKIP_SCHEDULE)
 
-SETENV = env BUILD_RPATH=$(BUILD_RPATH) TESTHOOK="$(TESTHOOK)" JOBS="$(JOBS)" TEST_ALLOW_DOWNLOADS="$(TEST_ALLOW_DOWNLOADS)"
+SETENV = env BUILD_RPATH=$(BUILD_RPATH) TESTHOOK="$(TESTHOOK)" JOBS="$(JOBS)" TEST_ALLOW_DOWNLOADS="$(TEST_ALLOW_DOWNLOADS)" OBJ="$(OBJ)"
 OF = $(OBJ)$(FLAVOUR)/
 DIRENV_PATH = $(OF)/tools:$(OF)/llvm/bin:$(OBJ)bench/tools:$(OF)/divine:$(OF)/lart:$(OF)
 
diff -rN -u old-divine-next/test/lib/pkgc-unpack new-divine-next/test/lib/pkgc-unpack
--- old-divine-next/test/lib/pkgc-unpack	2019-09-17 09:44:33.305647097 +0200
+++ new-divine-next/test/lib/pkgc-unpack	2019-09-17 09:44:33.305647097 +0200
@@ -10,7 +10,7 @@
 my $file = `cat $fn`;
 
 # copy over any #include files
-my $cc = "$ENV{BINDIR}/../toolchain/clang/bin/clang";
+my $cc = "$ENV{OBJ}toolchain/clang/bin/clang";
 $cc = "$cc++ -std=c++14" if $ext eq "cpp";
 my $cflags = "-isystem $ENV{SRCDIR}/dios/include -isystem $ENV{BINDIR}/dios/include -D__divine__";
 $cflags .= " $2" if ( $file =~ m,^(/\*|//) CC_OPTS: (.*?)(\*/)?$,sm );

# Fix Z3 on Fedora/RHEL
diff -rN -u old-divine-next/test/lib/pkgc-unpack new-divine-next/test/lib/pkgc-unpack
--- old/releng/cmake/FindZ3.cmake	2019-09-20 13:48:00.231141320 +0200
+++ new/releng/cmake/FindZ3.cmake	2019-09-20 13:48:53.721056119 +0200
@@ -2,7 +2,7 @@
   SET(Z3_FIND_QUIETLY TRUE)
 ENDIF (Z3_INCLUDE_DIR)
 
-FIND_PATH(Z3_INCLUDE_DIR z3.h z3++.h)
+FIND_PATH(Z3_INCLUDE_DIR z3.h z3++.h PATH_SUFFIXES z3)
 
 SET(Z3_NAMES z3 libz3 ltz3 libz3 lz3)
 FIND_LIBRARY(Z3_LIBRARY NAMES ${Z3_NAMES} )
